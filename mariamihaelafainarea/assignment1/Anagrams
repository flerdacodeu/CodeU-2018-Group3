
import java.util.HashMap;
import java.util.Iterator;
import java.util.Map;
import java.util.Scanner;
import jdk.nashorn.internal.runtime.ScriptRuntime;

/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */

/**
 *
 * @author maria
 */
public class Anagrams {
   
   
    private Boolean findIfAnagramWords(String text1,String text2) {
        //I'm verifying the two words
         HashMap<Character, Integer> table = new HashMap<Character, Integer>();
         //If the number of letters is not okey.. stop the process
         //they can't be anagrams
        if (text1.length() != text2.length()) {
            return false;
        }
        int length = text1.length();
       //i store each letter
       //and i keep in the hashmap also the number of entrances,
       //the number of occurences of that letter
        for (int i = 0; i < length; i++) {
            int numberEntrances = 0;
            if (table.get(text1.charAt(i)) == null) {  
                 table.put(text1.charAt(i),1);
                
            } else {
                numberEntrances = table.get(text1.charAt(i)) + 1;
                table.put(text1.charAt(i),numberEntrances);
            }     
            
        }
        //then i iterate through the letters of the other word
        //and i check is the current letter
        //is also in the hashmap
        //and i update the number of occurences from hashmap
        //untill the end of the searching 
        for (int i = 0; i < length; i++) {
            int numberEntrances = 0 ;
            if (table.get(text2.charAt(i)) == null) {
                return false;
            }
            
            numberEntrances = table.get(text2.charAt(i));

            numberEntrances--;
            
            table.replace(text2.charAt(i),numberEntrances);

        }
        //if the hashmap is empty of occurences
        //everything is okey
        for (Character c : table.keySet()) {
            if(table.get(c) != 0) {
                return false;
            }
        }
        return true;
      
    }
   
    private Boolean findIfAnagramSentences(String[] words,String[] words2) {
        //We have to compare senteces
        //So we compare first the number of words
         HashMap<String, Integer> table2 = new HashMap<>();
        if (words.length != words2.length) {
            //if the number isn't okey ...the senteces aren't anagrams
            return false;
        }
        for (int i = 0; i < words.length; i++) {
            //store each word from the first sentence in a hashmap
            if (table2.get(words[i]) == null ) {
                table2.put(words[i], 1);
            } else {
                //every time it is repeated
                //i increment the number of entries
                int numberEntrances = table2.get(words[i]);
                numberEntrances++;
                table2.replace(words[i], numberEntrances);
            } 
        }
        for (int i = 0; i < words2.length; i++) {
            //then iterate through the second sentence
            //and search for every word
            Boolean isOkey = false;
            String anagrama = null;
            for (String c : table2.keySet()) {
                //when i'm searching for a word
                //i keep in mind that it can exist
                //in the first sentece
                //but not in this form
                //but in an anagram
                if ( findIfAnagramWords(words2[i], c) ) {
                    isOkey = true;
                    anagrama = c;
                }
            }
            if ( isOkey == false ) {
                //if only one word doesn't fit any other anagram in 
                //the previous sentece
                //it is not an anagram
                return false;
            } else {
                //if i found that word or an anagram of it
                //i decrease the number of occurences from
                //the hashmap
                int numberEntrances = table2.get(anagrama);
                numberEntrances--;
                table2.replace(anagrama, numberEntrances);
            } 
            
        }
        //if everything in hashmap is clean
        //the sentences are anagrams.
        for (String c : table2.keySet()) {
            if(table2.get(c) != 0) {
                return false;
            }
        }
        return true;
        
    }
    public Boolean decideTheOperation(String x, String y) {
        //This method decides if we have to compare two words
        //or two sentences. 
        //If the length of the array of strings is just 1 
        //we are comparing two words
        //else
        //there are many words in a sentece.
        String[] words1 = x.split("\\s+");
        String[] words2 = y.split("\\s+");
        if (words1.length != words2.length) {
            return false;
        }
        if (words1.length == 1) {
            return findIfAnagramWords(words1[0],words2[0]);
        } else {
            return findIfAnagramSentences(words1, words2);
        }
    }
    public static void main ( String[] args) {
        Anagrams a = new Anagrams();
        System.out.println("What operation do you want?");
        System.out.println("Press \"a\" if you want to compare case insensitive");
        System.out.println("Press \"b\" if you want to compare case sensitive");
        Scanner sc = new Scanner(System.in);
        String response = sc.nextLine();
        if (response.equals("a") != true && response.equals("b") != true) {
            System.out.println("You haven't pressed a valid option. GoodBye !");
            return;
        }
        System.out.println("Okey ! ");
        System.out.println("Introduce the words/sentences on different lines");
        System.out.println("I'm waiting ...");
        String x = sc.nextLine();
        String y = sc.nextLine();
        if (response.equals("a")) {
           
            x = x.toLowerCase();
            y = y.toLowerCase();
            System.out.println("Okey! Case insensitive");
           
        } else if(response.equals("b")) {
            System.out.println("Okey ! Case sensitive");
        } else {
            System.out.println("You haven't introduced a valid operation. GoodBye!");
            return;
        }
        System.out.println(a.decideTheOperation(x, y));         
        
    }

    
    
}
