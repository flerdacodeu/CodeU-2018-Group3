
import java.util.HashMap;
import java.util.Iterator;
import java.util.Map;
import java.util.Scanner;
import jdk.nashorn.internal.runtime.ScriptRuntime;

/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */

/**
 *
 * @author maria
 */
public class Anagrams {
   
   
    public Boolean findIfAnagramWords(String text1,String text2) {
         HashMap<Character, Integer> table = new HashMap<Character, Integer>();
        if (text1.length() != text2.length()) {
            return false;
        }
        int length = text1.length();
        
        for (int i = 0; i < length; i++) {
            int nrIntrari = 0;
            if (table.get(text1.charAt(i)) == null) {  
                 table.put(text1.charAt(i),1);
                
            } else {
                nrIntrari = table.get(text1.charAt(i)) + 1;
                table.put(text1.charAt(i),nrIntrari);
            }     
            
        }
         for (Map.Entry<Character, Integer> entry : table.entrySet()) {
                Character key = entry.getKey();
                Integer value = entry.getValue();
                System.out.println(key + " " + value);
                
            }
        for (int i = 0; i < length; i++) {
            int nrIntrari = 0 ;
            if (table.get(text2.charAt(i)) == null) {
                return false;
            }
            
            nrIntrari = table.get(text2.charAt(i));

            nrIntrari--;
            
            table.replace(text2.charAt(i),nrIntrari);

        }
         for (Map.Entry<Character, Integer> entry : table.entrySet()) {
                Character key = entry.getKey();
                Integer value = entry.getValue();
                System.out.println(key + " " + value);
                
            }
        for (Character c : table.keySet()) {
            if(table.get(c) != 0) {
                return false;
            }
        }
        return true;
      
    }
   
    public Boolean findIfAnagramSentences(String[] words,String[] words2) {
         HashMap<String, Integer> table2 = new HashMap<>();
        if (words.length != words2.length) {
            return false;
        }
        for (int i = 0; i < words.length; i++) {
            if (table2.get(words[i]) == null ) {
                table2.put(words[i], 1);
            } else {
                int nrIntrari = table2.get(words[i]);
                nrIntrari++;
                table2.replace(words[i], nrIntrari);
            } 
        }
        for (int i = 0; i < words2.length; i++) {
            Boolean isOkey = false;
            String anagrama = null;
            for (String c : table2.keySet()) {
                if ( findIfAnagramWords(words2[i], c) ) {
                    isOkey = true;
                    anagrama = c;
                }
            }
            if ( isOkey == false ) {
                //if only one word doesn't fit any other anagram in 
                //the previous sentece
                //it is not an anagram
                return false;
            } else {
                int nrIntrari = table2.get(anagrama);
                nrIntrari--;
                table2.replace(anagrama, nrIntrari);
            } 
            
        }
        for (String c : table2.keySet()) {
            if(table2.get(c) != 0) {
                return false;
            }
        }
        return true;
        
    }
    public Boolean decideTheOperation(String x, String y) {
        String[] words1 = x.split(" ?!.");
        String[] words2 = y.split(" ?!.");
        if (words1.length != words2.length) {
            return false;
        }
        if (words1.length == 1) {
            return findIfAnagramWords(words1[0],words2[0]);
        } else {
            return findIfAnagramSentences(words1, words2);
        }
    }
    public static void main ( String[] args) {
        Anagrams a = new Anagrams();
        System.out.println("What operation do you want?");
        System.out.println("Press \"a\" if you want to compare case insensitive");
        System.out.println("Press \"b\" if you want to compare case sensitive");
        Scanner sc = new Scanner(System.in);
        String response = sc.nextLine();
        if (response.equals("a") != true && response.equals("b") != true) {
            System.out.println("You haven't pressed a valid option. GoodBye !");
            return;
        }
        System.out.println("Okey ! ");
        System.out.println("Introduce the words/sentences on different lines");
        System.out.println("I'm waiting ...");
        String x = sc.nextLine();
        String y = sc.nextLine();
        if (response.equals("a")) {
           
            x = x.toLowerCase();
            y = y.toLowerCase();
            System.out.println("Okey! Case insensitive");
           
        } else if(response.equals("b")) {
            System.out.println("Okey ! Case sensitive");
        } else {
            System.out.println("You haven't introduced a valid operation. GoodBye!");
            return;
        }
        System.out.println(a.decideTheOperation(x, y));         
        
    }

    
    
}
